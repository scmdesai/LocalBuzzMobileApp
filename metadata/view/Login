{
    "type": "Ext.Container",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "baseCls": null,
        "container|animation": "pop",
        "designer|userAlias": "Login",
        "designer|userClassName": "Login",
        "hidden": false,
        "html": null,
        "id": "Login",
        "itemId": "Login",
        "layout": "card",
        "maxHeight": "",
        "style": "",
        "styleHtmlCls": null,
        "styleHtmlContent": true
    },
    "name": "MyContainer2",
    "designerId": "64c531f5-e936-4afd-8cc1-7e584a9c02b6",
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onContainerPainted",
                "implHandler": [
                    "",
                    "",
                    "",
                    "",
                    "// Settings.",
                    "FacebookInAppBrowser.settings.appId = '900651756709444';",
                    "FacebookInAppBrowser.settings.redirectUrl = 'http://www.appsonmobile.com';",
                    "FacebookInAppBrowser.settings.permissions = 'email';",
                    "",
                    "// Optional",
                    "FacebookInAppBrowser.settings.timeoutDuration = 7500;",
                    "",
                    "",
                    "",
                    "// Login(accessToken will be stored trough localStorage in 'accessToken');",
                    "FacebookInAppBrowser.login({",
                    "\tsend: function() {",
                    "\t\tconsole.log('login opened');",
                    "\t},",
                    "\tsuccess: function(access_token) {",
                    "\t\tconsole.log('done, access token: ' + access_token);",
                    "\t\tExt.Viewport.getComponent('WelcomeScreen').destroy();",
                    "",
                    "",
                    "\t},",
                    "\tdenied: function() {",
                    "\t\tconsole.log('user denied');",
                    "\t},",
                    "\ttimeout: function(){",
                    "\t\tconsole.log('a timeout has occurred, probably a bad internet connection');",
                    "\t},",
                    "\tcomplete: function(access_token) {",
                    "\t\tconsole.log('window closed');",
                    "\t\tif(access_token) {",
                    "\t\t\tconsole.log(access_token);",
                    "\t\t} else {",
                    "\t\t\tconsole.log('no access token');",
                    "\t\t}",
                    "\t},",
                    "\tuserInfo: function(userInfo) {",
                    "",
                    "\t\tif(userInfo) {",
                    "\t\tvar userInf = JSON.stringify(userInfo);",
                    "\t\t\tconsole.log(userInf);",
                    "",
                    "\t\t\tvar info = userInf.split(\"\\\",\\\"\");",
                    "",
                    "\t\t\tvar tmp = info[0].split(\"\\\":\\\"\");",
                    "\t\t\tvar email = tmp[1];",
                    "",
                    "\t\t\ttmp = info[1].split(\"\\\":\\\"\");",
                    "\t\t\tvar loginName = tmp[1];",
                    "",
                    "\t\t\ttmp = info[2].split(\"\\\":\\\"\");",
                    "\t\t\tvar gender = tmp[1];",
                    "",
                    "\t\t\ttmp = info[3].split(\"\\\":\\\"\");",
                    "\t\t\tvar userId = tmp[1];",
                    "",
                    "\t\t\tvar record = Ext.getStore('MyJsonPStore').findRecord('loginEmail',email,0,true,false,false);",
                    "",
                    "\t\t\tif(!record){",
                    "\t\t\t\tExt.Msg.alert('Business could not be verified',\"Please contact us at info@appsonmobile.com\",",
                    "\t\t\t\tfunction(){",
                    "\t\t\t\t\tFacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\twindow.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\tlocation.reload();",
                    "\t\t\t\t\t});",
                    "\t\t\t\t},null);",
                    "",
                    "\t\t\t}",
                    "\t\t\telse {",
                    "\t\t\t\tvar endDate = new Date(record.get('endDate'));",
                    "\t\t\t\tvar today = new Date();",
                    "\t\t\t\tvar storeUserDetails = Ext.getStore('UserDetails');",
                    "\t\t\t\tstoreUserDetails.removeAll();",
                    "\t\t\t\tif(record.get('signupStatus') ===\"Approved\") {",
                    "\t\t\t\t\tif((record.get('planType')===\"Free\" && endDate >= today)||record.get('planType')===\"Paid\"){",
                    "\t\t\t\t\t\tstoreUserDetails.add({'customerId' : record.get('customerId'),",
                    "\t\t\t\t\t\t\t\t\t\t\t  'email': email,",
                    "\t\t\t\t\t\t\t\t\t\t\t  'businessName': record.get('businessName'),",
                    "\t\t\t\t\t\t\t\t\t\t\t  'DealPictureURL': record.get('pictureURL'),",
                    "\t\t\t\t\t\t\t\t\t\t\t  'city': record.get('city'),",
                    "\t\t\t\t\t\t\t\t\t\t\t  'state': record.get('state')",
                    "\t\t\t\t\t\t\t\t\t\t  });",
                    "\t\t\t\t\t\tvar view = Ext.Viewport.add({xtype:'panel'});",
                    "\t\t\t\t\t\tExt.Viewport.getActiveItem().destroy();",
                    "\t\t\t\t\t\tExt.Viewport.setActiveItem(view);",
                    "",
                    "\t\t\t\t}",
                    "\t\t\t\telse",
                    "\t\t\t\t{",
                    "\t\t\t\t\tExt.Msg.alert('Business could not be verified',",
                    "\t\t\t\t\t\t\t\t  \"Please contact us at info@appsonmobile.com\",",
                    "\t\t\t\t\t\t\t\t  function(){",
                    "\t\t\t\t\t\t\t\t\tFacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\t\t\t\twindow.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\t\t\t\tlocation.reload();",
                    "\t\t\t\t\t\t\t\t});",
                    "\t\t\t\t\t},null);",
                    "",
                    "\t\t\t\t}",
                    "",
                    "\t\t\t}",
                    "\t\t\telse if(record.get('signupStatus') ==='Pending'){",
                    "\t\t\t\tExt.Msg.alert('Business could not be verified',",
                    "\t\t\t\t\t\t\t  \"Please contact us at info@appsonmobile.com\",",
                    "\t\t\t\t\t\t\t  function(){",
                    "\t\t\t\t\t\t\t   FacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\t\t   window.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\t\t   location.reload();",
                    "\t\t\t\t\t\t\t\t});",
                    "\t\t\t\t},null);",
                    "",
                    "\t\t\t}",
                    "\t\t\telse if(record.get('signupStatus') ==='Denied'){",
                    "\t\t\t\tExt.Msg.alert('Business could not be verified',",
                    "\t\t\t\t\t\t\t   \"Please contact us at info@appsonmobile.com\",",
                    "\t\t\t\t\t\t\t   function(){",
                    "\t\t\t\t\t\t\t   FacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\t\t\t window.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\t\t\t location.reload();",
                    "",
                    "",
                    "\t\t\t\t\t\t\t\t});",
                    "\t\t\t\t},null);",
                    "",
                    "\t\t\t}",
                    "\t\t\telse if(record.get('signupStatus') ==='Cancelled'){",
                    "\t\t\t\tExt.Msg.alert('Our records show that your account is not active',",
                    "\t\t\t\t\t\t\t   \"Please contact us at info@appsonmobile.com if you would like to activate your account\",",
                    "\t\t\t\t\t\t\t   function(){",
                    "\t\t\t\t\t\t\t\t FacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\t\t\t window.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\t\t\t location.reload();",
                    "\t\t\t\t\t\t\t\t});",
                    "\t\t\t\t\t\t\t},null);",
                    "\t\t\t}",
                    "\t\t\telse {",
                    "\t\t\t\tExt.Msg.alert('Cannot find your account',\"Please contact us at info@appsonmobile.com\",",
                    "\t\t\t\t\t\t\t  function(){",
                    "\t\t\t\t\t\t\t   FacebookInAppBrowser.logout(function(){",
                    "\t\t\t\t\t\t\t\twindow.localStorage.setItem('facebookAccessToken',null) ;",
                    "\t\t\t\t\t\t\t\tlocation.reload();",
                    "\t\t\t\t\t\t\t\t});",
                    "\t\t\t\t\t\t\t},null);",
                    "",
                    "\t\t\t}",
                    "",
                    "",
                    "\t\t}",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "\t\t\t\t} else {",
                    "\t\t\t\t\tconsole.log('no user info');",
                    "\t\t\t\t}",
                    "\t\t\t}",
                    "\t\t});",
                    ""
                ],
                "name": "painted"
            },
            "name": "onContainerPainted",
            "designerId": "ba097338-d643-4fe5-8f12-a4de6b795b49"
        }
    ]
}