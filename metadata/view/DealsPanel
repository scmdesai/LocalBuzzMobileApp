{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "baseCls": "x-list",
        "designer|userAlias": "DealsPanel",
        "designer|userClassName": "DealsPanel",
        "html": null,
        "id": "dealsPanel",
        "itemId": "dealsPanel",
        "minHeight": "80%",
        "padding": "5 5 5 5",
        "style": "border:1px inset;",
        "styleHtmlContent": true,
        "url": ""
    },
    "designerId": "d4764d2e-c8e8-43dc-80d9-21aa4125e50d",
    "cn": [
        {
            "type": "linkedinstance",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|displayName": "listofdeals",
                "designer|uiInterfaceName": "normal",
                "docked": "top",
                "height": "90%",
                "itemCls": null,
                "itemId": "listofdeals",
                "width": "100%"
            },
            "name": "listofdeals",
            "designerId": "16f0bd9e-c524-49dc-a0a0-23ed8fe3c88d",
            "masterInstanceId": "f8e0fb41-f63c-434c-a4fb-6d0dfbc805af"
        },
        {
            "type": "Ext.Button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "baseCls": null,
                "designer|uiInterfaceName": "confirm",
                "docked": "bottom",
                "height": "7%",
                "iconCls": null,
                "id": "UploadDeal",
                "itemId": "UploadDeal",
                "margin": "5 5 5 5",
                "maxWidth": null,
                "style": "font-size:5vw",
                "text": "Create Buzz",
                "ui": "confirm",
                "width": ""
            },
            "name": "MyButton16",
            "designerId": "0fb7162f-639b-4d4a-83a4-4ad100b6dd63"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDealsPanelActivate",
                "implHandler": [
                    "console.log('Deals Panel Activated');",
                    "var storeUserDetails = Ext.getStore('UserDetails');",
                    "storeUserDetails.load();",
                    "var customerId;",
                    "var businessName;",
                    "var date = new Date();",
                    "",
                    "var today = Ext.Date.format(date, 'n/j/Y');",
                    "",
                    "storeUserDetails.each(function(record){",
                    "\t//console.log('StoreUserDetails : ' +record.get('customerId'));",
                    "\tcustomerId = record.get('customerId');",
                    "\tbusinessName = record.get('businessName');",
                    "",
                    "});",
                    "",
                    "console.log(customerId);",
                    "var store = Ext.getStore('MyDealsStore');",
                    "store.clearFilter();",
                    "store.filter('customerId',customerId);",
                    "",
                    " var records= [];",
                    "",
                    "",
                    "        store.each(function(rec)",
                    "                   {",
                    "",
                    "",
                    "\t\t\t\t\t   //console.log('Deal End Date: ' + rec.get('dealEndDate'));",
                    "\t\t\t\t\t   //console.log('Tdays date is : ' + today);",
                    "                       /*if(rec.get('dealEndDate') >= today) {",
                    "",
                    "                           records.push(rec.get('itemName'));",
                    "\t\t\t\t\t\t   //console.log('Active deal ' + rec.get('dealName'));",
                    "",
                    "",
                    "                       }",
                    "                       else {",
                    "                           Ext.Array.remove(records,rec.get('itemName'));",
                    "\t\t\t\t\t\t   //console.log('Expired deal ' + rec.get('dealName'));",
                    "\t\t\t\t\t\t   var req = Ext.Ajax.request({",
                    "",
                    "\t\t\t\tmethod:'POST',",
                    "",
                    "",
                    "\t\t\t\turl  : 'http://services.appsonmobile.com/deals/'+ rec.get('itemName')",
                    "",
                    "\t});",
                    "",
                    "",
                    "                       }*/",
                    "",
                    "\t\t\t\t\t   if(rec.get('dealEndDate') < today) {",
                    "",
                    "\t\t\t\t\t\t   Ext.Ajax.request({",
                    "",
                    "\t\t\t\tmethod:'POST',",
                    "",
                    "",
                    "\t\t\t\turl  : 'http://services.appsonmobile.com/deals/'+ rec.get('itemName')",
                    "",
                    "",
                    "",
                    "\t\t\t\t\t   });",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "\t\t\t\t\t   }});",
                    "store.load();",
                    "    /* store.clearFilter();",
                    "",
                    "      console.log(records.length);",
                    "",
                    "        store.filterBy(function(record){",
                    "            return Ext.Array.indexOf(records, record.get('itemName')) !== -1;",
                    "",
                    "        }, this);*/",
                    "",
                    "",
                    "",
                    ""
                ],
                "name": "activate"
            },
            "name": "onDealsPanelActivate",
            "designerId": "e3d31c6f-357b-45a3-b521-b2f26b17b0a5"
        }
    ]
}